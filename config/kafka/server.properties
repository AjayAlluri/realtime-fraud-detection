# Kafka Server Configuration for Fraud Detection System

# Basic Configuration
broker.id=1
listeners=PLAINTEXT://0.0.0.0:9092
advertised.listeners=PLAINTEXT://localhost:9092
num.network.threads=8
num.io.threads=16
socket.send.buffer.bytes=102400
socket.receive.buffer.bytes=102400
socket.request.max.bytes=104857600

# Log Configuration
log.dirs=/var/lib/kafka/data
num.partitions=12
default.replication.factor=3
min.insync.replicas=2
auto.create.topics.enable=false
delete.topic.enable=true

# Log Retention
log.retention.hours=168
log.retention.bytes=1073741824
log.segment.bytes=1073741824
log.retention.check.interval.ms=300000
log.segment.delete.delay.ms=60000

# Log Cleanup
log.cleanup.policy=delete
log.cleaner.enable=true
log.cleaner.threads=2
log.cleaner.io.max.bytes.per.second=5242880
log.cleaner.dedupe.buffer.size=134217728
log.cleaner.io.buffer.size=524288
log.cleaner.backoff.ms=15000

# Compression
compression.type=lz4
log.message.format.version=3.0-IV1
log.message.timestamp.type=CreateTime

# Zookeeper Configuration
zookeeper.connect=zookeeper-1:2181,zookeeper-2:2181,zookeeper-3:2181
zookeeper.connection.timeout.ms=18000
zookeeper.session.timeout.ms=18000

# Performance Tuning
num.replica.fetchers=4
replica.fetch.max.bytes=1048576
replica.fetch.wait.max.ms=500
replica.high.watermark.checkpoint.interval.ms=5000
replica.socket.timeout.ms=30000
replica.socket.receive.buffer.bytes=65536
replica.lag.time.max.ms=30000

# Producer Configuration
batch.size=16384
linger.ms=5
buffer.memory=33554432
acks=all
retries=2147483647
max.in.flight.requests.per.connection=5
enable.idempotence=true

# Consumer Configuration
fetch.min.bytes=1
fetch.max.wait.ms=500
max.partition.fetch.bytes=1048576
group.initial.rebalance.delay.ms=3000
group.max.session.timeout.ms=1800000

# Topic Configuration Defaults
unclean.leader.election.enable=false
leader.imbalance.per.broker.percentage=10
leader.imbalance.check.interval.seconds=300
replica.fetch.backoff.ms=1000

# Security (disabled for development)
security.inter.broker.protocol=PLAINTEXT
sasl.enabled.mechanisms=
sasl.mechanism.inter.broker.protocol=

# Metrics and JMX
jmx.port=9999
auto.leader.rebalance.enable=true

# Transaction Configuration
transaction.state.log.replication.factor=3
transaction.state.log.min.isr=2
transaction.state.log.num.partitions=50
transaction.abort.timed.out.transaction.cleanup.interval.ms=10000
transaction.remove.expired.transaction.cleanup.interval.ms=3600000

# Quota Configuration
quota.consumer.default=9223372036854775807
quota.producer.default=9223372036854775807

# Other Settings
controlled.shutdown.enable=true
controlled.shutdown.max.retries=3
controlled.shutdown.retry.backoff.ms=5000
connections.max.idle.ms=600000
group.max.size=2147483647
offset.metadata.max.bytes=4096
offsets.commit.required.acks=-1
offsets.commit.timeout.ms=5000
offsets.load.buffer.size=5242880
offsets.retention.check.interval.ms=600000
offsets.retention.minutes=10080
offsets.topic.compression.codec=0
offsets.topic.num.partitions=50
offsets.topic.replication.factor=3
offsets.topic.segment.bytes=104857600

# Request Configuration
request.timeout.ms=30000
max.connections.per.ip=2147483647
max.connections.per.ip.overrides=

# SSL Configuration (disabled)
ssl.keystore.type=JKS
ssl.truststore.type=JKS
ssl.secure.random.implementation=

# Inter-broker Configuration
inter.broker.protocol.version=3.0-IV1

# Log4j Configuration
log4j.logger.kafka=INFO
log4j.logger.kafka.controller=TRACE
log4j.logger.kafka.log.LogCleaner=INFO
log4j.logger.state.change.logger=TRACE